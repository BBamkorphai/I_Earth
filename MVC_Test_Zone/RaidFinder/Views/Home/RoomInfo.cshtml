@using RaidFinder.Models
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model RaidingPostModels
@inject IHttpContextAccessor contxt;
@{
	ViewData["Title"] = "RoomInfo";
	Layout = "~/Views/Shared/Navbar.cshtml";
}

@section AdditionalCSS {
	<link rel="stylesheet" href="~/lib/css/roominfo.css">
}


@if (Model != null) {
        <div>
            <div class="subtab">
                <h2><b>Party List</b></h2>
                <button><b>+ create your own</b></button>
            </div><hr>
            <div class="room">
                <div class="roominfo">
                    <div>
                        <div class="box">
                            <span></span>
                            <div class="number">
                                <b class='top' style="--i:0;">@Model.PartyList.Count()</b>
                                <b class='bot' style="--i:1;">@Model.MaxSize</b>
                            </div>
                        </div>
                        <div class="roomtitle">
                            <h2>POWER LEVEL</h2>
                            <b>@Model.PowerLevel</b>
                        </div>
                    </div>
                    <div class="roomdest" style="border-left:solid white">
                        <h2>@Model.Name</h2>
                        <p>
                            @Model.Description
                        </p>
                    </div>
                </div><hr>
                <div class="memberlist">
                    @foreach (var User in Model.PartyList)
                    {
                        @if (User != null)
                        {
                            <div>
                                <button onclick="window.location.href='@Url.Action("KickUser", "Home", new { PostId = Model.PostId, UserId = User.UserId })';">X</button>
                                <img src="https://cdn4.sharechat.com/img_945769_3157a239_1674544942589_sc.jpg?tenant=sc&referrer=tag-service&f=589_sc.jpg">
                                @if (Model.OwnerId == User.UserId)
                                {
                                    <h3><b>Party Leader</b></h3>
                                }
                                <p>U : @User.Name</p>
                                <p>@User.Stat.Class LV @User.Stat.Level</p>
                                <p>PW @User.Stat.PowerLevel</p>
                            </div>
                        }
                    }
                </div>

                <div class="roominteractive">
                    <button id="join" onclick="window.location.href='@Url.Action("JoinRoom", "Home", new { PostId = Model.PostId })';"> + Join team </button>
                    <button id="delete" > Delete Post </button>
                    <button id="save" > Save Post </button>
                </div>
            </div>
        </div>
}